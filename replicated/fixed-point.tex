\subsection{Fixed point arithmetic}
\label{subsec:fixed-point}

We define $\verb|fixed|(k, f)$ as the set of rational numbers $\{x \in
\Q : x = \bar{x} \cdot 2^{-f}, \bar{x} \in \Z_{\share{k}}\}$. Here $\bar{x}
\in Z_{\share{k}}$ denotes that $x$ is at most a $k$ bit integer. A fixed point number
is represented in memory as $x \cdot 2^{f} = \bar{x} \in \Z_{\share{k}}$.

\noindent{\textbf{Encoding}.} To encode a number $x \in \Q$ into its fixed
point representation simply compute $\ceil{x \cdot 2^f}$. The rounding here
is arbitrary, one can also use floor function as long as the same rounding
function is used in the decoding.

\noindent{\textbf{Decoding}.} To decode a number from its fixed point representation
$x \in \verb|fixed|(k, f)$ output $x \cdot 2^{-f}$.

\noindent{\textbf{Addition}}. To add two secret shared fixed point numbers
$\share{x}, \share{y}$ where $x,y \in \verb|fixed(k, f)|$ output
$\share{x}+\share{y}$. Note that decoding will be successful iff $x+y$ does
not overflow $\Z_{2^k}$.

\noindent{\textbf{Multiplication by scalars}}. To multiply a public scalar
$c$ with $\share{x}$ where $x \in \verb|(fixed(k, f)|$ we output
$c \cdot \share{x}$. In this way when we decode the product becomes (over the ring)
$\mathsf{Decode}(c \cdot x \cdot 2^f) = c \cdot x$. Again, this operation is going to
be successful iff. the product $c \cdot x$ fits in $\Z_{2^k}$.

\noindent{\textbf{Multiplication}.} Note that multiplication between two
fixed point numbers $\share{x}, \share{y}$ where $x,y \in \verb|fixed(k, f)|$

\input{truncation}

\noindent{\textbf{Fixed point division}.}
TBD. SecureNN has some leakage, check MP-SPDZ - there was no description in
ABY3 on fixed point division.

